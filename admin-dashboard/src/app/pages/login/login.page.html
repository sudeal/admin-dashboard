<div class="login-bg">
    <div class="login-card">
      <h2 class="login-title">{{ forgotPasswordMode ? 'Reset Password' : 'Login to Account' }}</h2>
      <p class="login-subtitle">
        {{ forgotPasswordMode ? 'Please enter your new password' : 'Please enter your email and password to continue' }}
      </p>
  
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" *ngIf="!forgotPasswordMode">
        <label class="field">
          <span class="field__label">Email address:</span>
          <input 
            class="field__input" 
            type="email" 
            formControlName="email"
            [class.field__input--error]="hasError('email', 'required') || hasError('email', 'email')"
          />
          <span class="field__error" *ngIf="hasError('email', 'required')">
            Email is required
          </span>
          <span class="field__error" *ngIf="hasError('email', 'email') && !hasError('email', 'required')">
            Please enter a valid email address
          </span>
        </label>

        <label class="field">
          <div class="field__label-row">
            <span class="field__label">Password</span>
            <button class="link" type="button" (click)="onForgetPassword()">Forget Password?</button>
          </div>
          <input 
            class="field__input" 
            type="password" 
            formControlName="password"
            [class.field__input--error]="hasError('password', 'required') || hasError('password', 'minlength')"
          />
          <span class="field__error" *ngIf="hasError('password', 'required')">
            Password is required
          </span>
          <span class="field__error" *ngIf="hasError('password', 'minlength') && !hasError('password', 'required')">
            Password must be at least 6 characters
          </span>
        </label>
  
        <label class="remember">
          <input type="checkbox" formControlName="remember" />
          <span>Remember Password</span>
        </label>
  
        <button class="btn-primary" type="submit" [disabled]="loginForm.invalid">
          Sign In
        </button>
      </form>

      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmitNewPassword()" *ngIf="forgotPasswordMode">
        <label class="field">
          <span class="field__label">Create new password:</span>
          <input 
            class="field__input" 
            type="password" 
            formControlName="newPassword"
            [class.field__input--error]="hasResetError('newPassword', 'required') || hasResetError('newPassword', 'minlength')"
          />
          <span class="field__error" *ngIf="hasResetError('newPassword', 'required')">
            Password is required
          </span>
          <span class="field__error" *ngIf="hasResetError('newPassword', 'minlength') && !hasResetError('newPassword', 'required')">
            Password must be at least 6 characters
          </span>
        </label>

        <label class="field">
          <span class="field__label">Enter the new password again:</span>
          <input 
            class="field__input" 
            type="password" 
            formControlName="confirmPassword"
            [class.field__input--error]="hasResetError('confirmPassword', 'required') || hasPasswordMismatch()"
          />
          <span class="field__error" *ngIf="hasResetError('confirmPassword', 'required')">
            Please confirm your password
          </span>
          <span class="field__error" *ngIf="hasPasswordMismatch() && !hasResetError('confirmPassword', 'required')">
            Passwords do not match
          </span>
        </label>

        <button class="btn-primary" type="submit" [disabled]="resetPasswordForm.invalid">
          Submit
        </button>
      </form>
  
      <div class="bottom">
        <span class="bottom__text">Don't have an account?</span>
        <button class="link" type="button" [routerLink]="['/signup']">Create Account</button>

      </div>
    </div>

   
    <div class="modal-overlay" *ngIf="showErrorModal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3 class="modal-title">Login Failed</h3>
          <button class="modal-close" type="button" (click)="closeModal()" aria-label="Close">
            <i class="bi bi-x"></i>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-message">Invalid email.Please enter a valid email address.
        </p>
        </div>
        <div class="modal-footer">
          <button class="btn-primary" type="button" (click)="closeModal()">Tamam</button>
        </div>
      </div>
    </div>

    
    <div class="modal-overlay" *ngIf="showPasswordErrorModal" (click)="closePasswordErrorModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3 class="modal-title">Password Reset Failed</h3>
          <button class="modal-close" type="button" (click)="closePasswordErrorModal()" aria-label="Close">
            <i class="bi bi-x"></i>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-message">Password creation failed. Please try again.</p>
        </div>
        <div class="modal-footer">
          <button class="btn-primary" type="button" (click)="closePasswordErrorModal()">Tamam</button>
        </div>
      </div>
    </div>
  </div>
  
<div class="page">
    <h2 class="page__title">{{ 'orderLists.title' | translate }}</h2>
  
    <section class="filter-bar" aria-label="Order filters">
      <button class="filter-bar__icon-btn" type="button" aria-label="Filter">
        <i class="bi bi-funnel"></i>
      </button>
  
      <div class="filter-bar__item">
        <span class="filter-bar__label">{{ 'orderLists.filterBy' | translate }}</span>
        <i class="bi bi-chevron-down"></i>
      </div>
  
      <div class="date-wrap">
        <button class="filter-bar__item" type="button" (click)="toggleDate()">
          <span class="filter-bar__label">{{ appliedLabel }}</span>
          <i class="bi bi-chevron-down"></i>
        </button>
  
        <div class="date-pop" *ngIf="dateOpen">
          <div class="date-pop__head">
            <div class="date-pop__title">{{ 'orderLists.selectDateRange' | translate }}</div>

            <button class="date-pop__x" type="button" (click)="closeDate()" [attr.aria-label]="'orderLists.close' | translate">
              <i class="bi bi-x"></i>
            </button>
          </div>

          <div class="date-pop__body">
            <div class="date-picker-wrapper">
              <input
                #datePickerInput
                type="text"
                class="date-input-hidden"
                [placeholder]="'orderLists.selectDateRangePlaceholder' | translate"
                readonly
              />
            </div>

            <div class="date-hint">{{ 'orderLists.youCanChooseMultipleDate' | translate }}</div>

            <div class="date-actions">
              <button class="btn-ghost" type="button" (click)="clearDate()">{{ 'orderLists.clear' | translate }}</button>
              <button class="btn-primary" type="button" (click)="applyDate()">{{ 'orderLists.applyNow' | translate }}</button>
            </div>
          </div>
        </div>
      </div>
  
      <div class="order-type-wrap">
        <button class="filter-bar__item" type="button" (click)="toggleOrderType()">
          <span class="filter-bar__label">{{ orderTypeLabel }}</span>
          <i class="bi bi-chevron-down"></i>
        </button>
  
        <div class="order-type-pop" *ngIf="orderTypeOpen">
          <div class="order-type-pop__head">
            <div class="order-type-pop__title">{{ 'orderLists.selectOrderType' | translate }}</div>

            <button class="order-type-pop__x" type="button" (click)="closeOrderType()" [attr.aria-label]="'orderLists.close' | translate">
              <i class="bi bi-x"></i>
            </button>
          </div>

          <div class="order-type-pop__body">
            <div class="order-type-options">
              <button
                *ngFor="let type of orderTypes; let i = index"
                type="button"
                class="order-type-chip"
                [class.order-type-chip--selected]="selectedOrderTypes.includes(type)"
                (click)="toggleOrderTypeSelection(type)"
              >
                {{ 'orderLists.orderTypes.' + orderTypeKeys[i] | translate }}
              </button>
            </div>

            <div class="order-type-hint">{{ 'orderLists.youCanChooseMultipleOrderType' | translate }}</div>

            <div class="order-type-actions">
              <button class="btn-ghost" type="button" (click)="clearOrderType()">{{ 'orderLists.clear' | translate }}</button>
              <button class="btn-primary" type="button" (click)="applyOrderType()">{{ 'orderLists.applyNow' | translate }}</button>
            </div>
          </div>
        </div>
      </div>
  
      <div class="order-status-wrap">
        <button class="filter-bar__item" type="button" (click)="toggleOrderStatus()">
          <span class="filter-bar__label">{{ orderStatusLabel }}</span>
          <i class="bi bi-chevron-down"></i>
        </button>
  
        <div class="order-status-pop" *ngIf="orderStatusOpen">
          <div class="order-status-pop__head">
            <div class="order-status-pop__title">{{ 'orderLists.selectOrderStatus' | translate }}</div>

            <button class="order-status-pop__x" type="button" (click)="closeOrderStatus()" [attr.aria-label]="'orderLists.close' | translate">
              <i class="bi bi-x"></i>
            </button>
          </div>

          <div class="order-status-pop__body">
            <div class="order-status-options">
              <button
                *ngFor="let status of orderStatuses; let i = index"
                type="button"
                class="order-status-chip"
                [class.order-status-chip--selected]="selectedOrderStatuses.includes(status)"
                (click)="toggleOrderStatusSelection(status)"
              >
                {{ 'orderLists.orderStatuses.' + orderStatusKeys[i] | translate }}
              </button>
            </div>

            <div class="order-status-hint">{{ 'orderLists.youCanChooseMultipleOrderStatus' | translate }}</div>

            <div class="order-status-actions">
              <button class="btn-ghost" type="button" (click)="clearOrderStatus()">{{ 'orderLists.clear' | translate }}</button>
              <button class="btn-primary" type="button" (click)="applyOrderStatus()">{{ 'orderLists.applyNow' | translate }}</button>
            </div>
          </div>
        </div>
      </div>
  
      <button class="filter-bar__reset" type="button">
        <i class="bi bi-arrow-counterclockwise"></i>
        {{ 'orderLists.resetFilter' | translate }}
      </button>
    </section>
  
    <section class="table-card">
      <table class="table">
        <thead>
          <tr>
            <th>{{ 'orderLists.id' | translate }}</th>
            <th>{{ 'orderLists.name' | translate }}</th>
            <th>{{ 'orderLists.address' | translate }}</th>
            <th>{{ 'orderLists.date' | translate }}</th>
            <th>{{ 'orderLists.type' | translate }}</th>
            <th class="th-status">{{ 'orderLists.status' | translate }}</th>
          </tr>
        </thead>
  
        <tbody>
          <tr
            *ngFor="let row of (orders$ | async); trackBy: trackById"
            class="row-click"
            [routerLink]="['/order-details', row.id]"
          >
            <td class="muted">{{ row.id }}</td>
            <td class="name">{{ row.name }}</td>
            <td class="muted">{{ row.address }}</td>
            <td class="muted">{{ row.date }}</td>
            <td class="muted">{{ row.type }}</td>
            <td class="td-status">
              <span class="badge" [attr.data-status]="row.status">{{ translateStatus(row.status) }}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
  
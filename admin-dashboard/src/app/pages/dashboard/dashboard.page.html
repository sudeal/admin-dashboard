<div class="dashboard">
    <ng-container *ngIf="stats$ | async as stats; else loading">
      <app-stat-cards
        [title]="'dashboard.title' | translate"
        [cards]="stats"
        [loading]="false"
      ></app-stat-cards>
  
      <!-- Sales Details -->
      <section class="panel">
        <div class="panel__header">
          <h3 class="panel__title">{{ 'dashboard.salesDetails' | translate }}</h3>
  
          <button class="panel__filter" type="button">
            {{ 'dashboard.october' | translate }}
            <i class="bi bi-chevron-down"></i>
          </button>
        </div>
  
        <div class="panel__body panel__body--sales">
          <div class="sales-table-wrap" *ngIf="salesDetails$ | async as salesDetails">
            <table class="sales-table">
              <thead>
                <tr>
                  <th>{{ 'dashboard.orderId' | translate }}</th>
                  <th>{{ 'dashboard.customer' | translate }}</th>
                  <th>{{ 'dashboard.product' | translate }}</th>
                  <th>{{ 'dashboard.qty' | translate }}</th>
                  <th>{{ 'dashboard.unitPrice' | translate }}</th>
                  <th>{{ 'dashboard.total' | translate }}</th>
                  <th>{{ 'dashboard.date' | translate }}</th>
                  <th class="th-status">{{ 'dashboard.status' | translate }}</th>
                </tr>
              </thead>
  
              <tbody>
                <tr *ngFor="let sale of salesDetails">
                  <td class="muted">#{{ sale.orderId }}</td>
                  <td class="name">{{ sale.customerName }}</td>
                  <td class="muted">{{ translateProduct(sale.productName) }}</td>
                  <td class="muted">{{ sale.quantity }}</td>
                  <td class="muted">{{ formatMoney(sale.unitPrice) }}</td>
                  <td class="strong">{{ formatMoney(sale.total) }}</td>
                  <td class="muted">{{ sale.date }}</td>
                  <td class="td-status">
                    <span class="badge" [attr.data-status]="sale.status">
                      {{ translateStatus(sale.status) }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
  
      <!-- âœ… Deals Details (Chart.js) - Sales Details'in ALTINA -->
      <section class="panel">
        <div class="panel__header">
          <h3 class="panel__title">Deals Details</h3>
  
          <button class="panel__filter" type="button">
            {{ 'dashboard.october' | translate }}
            <i class="bi bi-chevron-down"></i>
          </button>
        </div>
  
        <div class="panel__body panel__body--chart">
          <div class="chart-container">
            <canvas #dealsChart></canvas>
          </div>
        </div>
      </section>
    </ng-container>
  
    <ng-template #loading>
      <app-stat-cards
        [title]="'dashboard.title' | translate"
        [cards]="[]"
        [loading]="true"
      ></app-stat-cards>
    </ng-template>
  </div>
  
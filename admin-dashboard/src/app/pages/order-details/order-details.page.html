<div class="page" *ngIf="order$ | async as order">
  <div class="page__header">
    <h2 class="page__title">{{ 'orderDetails.title' | translate }}</h2>

    <div class="page__header__right">
      <button class="icon-btn" type="button" (click)="onPrint()" [attr.aria-label]="'orderDetails.print' | translate">
        <i class="bi bi-printer"></i>
      </button>
      <a class="btn btn--ghost" routerLink="/order-lists">{{ 'orderDetails.back' | translate }}</a>
    </div>
  </div>

  <section class="table-card">
    <!-- top summary -->
    <div class="summary">
      <div class="summary__left">
        <div class="orderno">{{ 'orderDetails.orderNo' | translate }}: <span>#{{ order.id }}</span></div>
        <div class="meta">
          <span class="muted">{{ 'orderDetails.date' | translate }}:</span>
          <span class="strong">{{ order.date }}</span>
          <span class="dot">â€¢</span>
          <span class="muted">{{ 'orderDetails.type' | translate }}:</span>
          <span class="strong">{{ order.type }}</span>
        </div>
      </div>

      <div class="summary__right">
        <span class="badge" [attr.data-status]="order.status">{{ translateStatus(order.status) }}</span>
      </div>
    </div>

    <!-- customer / shipping -->
    <div class="info">
      <div class="info__col">
        <div class="label">{{ 'orderDetails.customer' | translate }}</div>
        <div class="name">{{ order.name }}</div>
        <div class="muted">{{ order.email }}</div>
        <div class="muted">{{ order.phone }}</div>
      </div>

      <div class="info__col">
        <div class="label">{{ 'orderDetails.shippingAddress' | translate }}</div>
        <div class="muted">{{ order.address }}</div>
        <div class="muted">Turkey</div>
      </div>

      <div class="info__col info__col--right">
        <div class="label">{{ 'orderDetails.tracking' | translate }}</div>
        <div class="muted">TRK-{{ order.id }}-A</div>
        <div class="muted">{{ 'orderDetails.carrier' | translate }}: DashStack Express</div>
      </div>
    </div>

    <!-- items table -->
    <div class="table-wrap" *ngIf="items$ | async as items">
      <table class="table">
        <thead>
          <tr>
            <th class="th-image">{{ 'orderDetails.image' | translate }}</th>
            <th class="th-product">{{ 'orderDetails.product' | translate }}</th>
            <th class="th-category">{{ 'orderDetails.category' | translate }}</th>
            <th class="th-qty">{{ 'orderDetails.qty' | translate }}</th>
            <th class="th-unit">{{ 'orderDetails.unit' | translate }}</th>
            <th class="th-total">{{ 'orderDetails.total' | translate }}</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let it of items">
            <td>
              <img class="img" [src]="it.imageUrl" [alt]="it.name" />
            </td>
            <td class="name">{{ it.name }}</td>
            <td class="muted">{{ translateCategory(it.category) }}</td>
            <td class="muted">{{ it.qty }}</td>
            <td class="muted">{{ money(it.unitPrice) }}</td>
            <td class="strong td-right">{{ money(it.lineTotal) }}</td>
          </tr>
        </tbody>
      </table>

      <!-- totals -->
      <div class="bottom">
        <div class="totals">
          <div class="row">
            <span class="muted">{{ 'orderDetails.subtotal' | translate }}</span>
            <span class="strong">{{ money(subtotal(items)) }}</span>
          </div>
          <div class="row">
            <span class="muted">{{ 'orderDetails.shipping' | translate }}</span>
            <span class="strong">{{ money(shipping) }}</span>
          </div>
          <div class="row">
            <span class="muted">{{ 'orderDetails.tax' | translate }}</span>
            <span class="strong">{{ money(taxAmount(subtotal(items))) }}</span>
          </div>
          <div class="divider"></div>
          <div class="row grand">
            <span class="strong">{{ 'orderDetails.total' | translate }}</span>
            <span class="strong">{{ money(total(subtotal(items))) }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- not found -->
<div class="page" *ngIf="(order$ | async) === undefined">
  <h2 class="page__title">{{ 'orderDetails.orderNotFound' | translate }}</h2>
  <a class="btn btn--ghost" routerLink="/order-lists">{{ 'orderDetails.backToOrderLists' | translate }}</a>
</div>
